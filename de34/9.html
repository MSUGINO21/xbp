<!DOCTYPE html>
<html lang="jp">
<head>
   
    <title>杉野　最終発表</title>
   
    <link rel="stylesheet" href="css/style 3.css">
 
</head>
<body>

    <header id="header">
        <nav>
            <ul>
              <li><a href="../index.html">Top</a></li>
              <li class="navsmall"><a href="#">1st Year</a>
                <ul>
                <li><a href="../de12/index.html">デザイン演習Ⅰ・Ⅱ</a></li>
                <li><a href="../digi_fab/index.html">デジタルファブリケーション</a></li>
                </ul>
            </li>
    
              <li class="navsmall"><a href="#">2nd Year</a>
                <ul>
                <li><a href="index.html">デザイン演習Ⅲ・Ⅳ</a></li>
                </ul>
              </li>

              <li><a href="https://kuxbp.github.io/xbp/xbp2021/">XBP一期生（外部サイト）</a></li>
            </ul>
          </nav>
    
          <img class="title" src="images/title.png" width="40%">
            
        </header>

        <h1 class="menu-contents">最終発表</h1>
      
 <div class="contents">
      <h2 class="menu-contents">3班　最終製作</h2>
      
<h3 class="menu-contents">ふぇるま〜た（握力で演奏できる、ゆる楽器）</h3>
<div class="photo">
<iframe width="560" height="315" src="https://www.youtube.com/embed/J7F6duQMyRA" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><br>
<img src="images/220718-1.jpg" width="40%"><img src="images/220718-2.jpg" width="50%">
</div>
<div class="details">
プレゼン資料：<a href="files/デザイン演習34プレゼン (最新).pptx">こちら</a>からダウンロード<br>
作成データ(筐体)：<a href="files/ferumata.zip">こちら</a>からダウンロード<br>
動作の動画　その１（ショート動画）：<a href="https://www.youtube.com/shorts/dCS3bQAD9gU">こちら</a><br>
動作の動画　その２：<br>
</div>
<div class="photo">
<iframe width="560" height="315" src="https://www.youtube.com/embed/dbEmz3MTN_4" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</div>
<h3 class="menu-contents">pythonのコード：</h3>
<div class="details">
<code>
  <ol style="list-style:decimal-leading-zero outside;in-left:0;padding-left:36px;margin:0;background-color:#EEF;color:#000;">
  <li style="background-color:#EFF;">import doyolab</li>
  <li style="background-color:#EEF;">import time</li>
  <li style="background-color:#EFF;"></li>
  <li style="background-color:#EEF;">#シリアルポートを入力-------------------------</li>
  <li style="background-color:#EFF;">serial_port='/dev/cu.usbmodem1201'</li>
  <li style="background-color:#EEF;">#-------------------------------------------</li>
  <li style="background-color:#EFF;"></li>
  <li style="background-color:#EEF;">#Arduinoとのシリアル通信設定-------------------</li>
  <li style="background-color:#EFF;">my_arduino = doyolab.set_serial(serial_port,9600)</li>
  <li style="background-color:#EEF;">#-------------------------------------------</li>
  <li style="background-color:#EFF;"></li>
  <li style="background-color:#EEF;"></li>
  <li style="background-color:#EFF;">#user_key、sub_idの設定---------------------</li>
  <li style="background-color:#EEF;">#自分のユーザーkeyを書く</li>
  <li style="background-color:#EFF;">user_key1='y6nP71kPXap6Q89ZWTr2easHWxIzxo'</li>
  <li style="background-color:#EEF;"></li>
  <li style="background-color:#EFF;">#subIDはどのデバイスからのデータか、どのプロジェクトのデータかなどを認識するために使います</li>
  <li style="background-color:#EEF;">sub_id1='pc'</li>
  <li style="background-color:#EFF;"></li>
  <li style="background-color:#EEF;">#-------------------------------------------</li>
  <li style="background-color:#EFF;"></li>
  <li style="background-color:#EEF;"></li>
  <li style="background-color:#EFF;"></li>
  <li style="background-color:#EEF;">#while Trueは無限ループ#----------------------</li>
  <li style="background-color:#EFF;">while True:</li>
  <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# Arduinoからreadlineコマンドでデータを取得し、data_from_arduinoという変数に格納</li>
  <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;data_from_arduino=my_arduino.readline()</li>
  <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;#stripコマンドで、data_from_arduinoの中の余計な文字を削除</li>
  <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;#さらにintで文字で送られてきたデータをint型に変換</li>
  <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;data=int(data_from_arduino.strip())</li>
  <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;print(data)</li>
  <li style="background-color:#EEF;"></li>
  <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;# データの設定--------------------------------</li>
  <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;datetime_data = ""</li>
  <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;int_data = data #Arduinoから受け取った値をここでint_dataにいれる</li>
  <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;float_data = ""</li>
  <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;txt_data = ""</li>
  <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# -------------------------------------------</li>
  <li style="background-color:#EFF;"></li>
  <li style="background-color:#EEF;"></li>
  <li style="background-color:#EFF;"></li>
  <li style="background-color:#EEF;"></li>
  <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;# データの送信---------------------------------</li>
  <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# user_key</li>
  <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;# sub_id</li>
  <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# 日付データ（空白にしてもサーバーで自動で日付を入れてくれる）:datetim_data</li>
  <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;# 整数データ:int_data</li>
  <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# 実数データ(小数を含むデータ):float_data</li>
  <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;# テキストデータ:txt_data</li>
  <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;ret = doyolab.sendData_To_doyolabIoTserver(user_key1, sub_id1, datetime_data, int_data, float_data, txt_data)</li>
  <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;print(ret)</li>
  <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# -------------------------------------------</li>
  <li style="background-color:#EFF;">#-------------------------------------------</li>
  <li style="background-color:#EEF;"># IoTサーバーからデータの取得----------------------------------------------------</li>
  <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;# user_key</li>
  <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# sub_id</li>
  <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;# データ数：最新のデータからいくつのデータを取得するか？下記の例では1(最新のデータのみ）</li>
  <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;data_list = doyolab.getData_From_doyolabIoTserver(user_key1, sub_id1, 1)</li>
  <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;# リスト形式で取得される</li>
  <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;print(data_list)</li>
  <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;#0番目のデータの塊の中の2番目のデータを読みたい（0から始まるので、本当は3番目)</li>
  <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;int_data =int(data_list[0][2])</li>
  <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;print(int_data)</li>
  <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# --------------------------------------------------------------</li>
  <li style="background-color:#EFF;"></li>
  <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;# int_dataが300より大きかったら、'1'を送信(点灯させる）、それ以外の時は'0'を送る(消灯させる）</li>
  <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;if 950 &lt;= int_data &lt; 1000:</li>
  <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to_arduino = '1';</li>
  <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;if 900 &lt;= int_data &lt; 950:</li>
  <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to_arduino = '2';</li>
  <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;if 850 &lt;= int_data &lt; 900:</li>
  <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to_arduino = '3';</li>
  <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;if 800 &lt;= int_data &lt; 850:</li>
  <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to_arduino = '4';</li>
  <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;if 750 &lt;= int_data &lt; 800:</li>
  <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to_arduino = '5';</li>
  <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;if 700 &lt;= int_data &lt; 750:</li>
  <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to_arduino = '6';</li>
  <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;else:</li>
  <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to_arduino = '0';</li>
  <li style="background-color:#EFF;"></li>
  <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Arduinoにデータを送る</li>
  <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;my_arduino.write(to_arduino.encode())</li>
  <li style="background-color:#EEF;"></li>
  <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;time.sleep(5)  # 指定した秒数を待つ（msでなく秒なので、注意）　　サーバーに負荷がかかるので5より小さい値は設定しないでください。（実装する際は可能な限り大きな数字にしてください）</li>
  <li style="background-color:#EEF;"></li>
  <li style="background-color:#EFF;"></li>
  </ol></code><br>
</div>
  <h3 class="menu-contents">Arduinoのコード：</h3>
  <div class="details">
  <code>
    <ol style="list-style:decimal-leading-zero outside;in-left:0;padding-left:36px;margin:0;background-color:#EEF;color:#000;">
    <li style="background-color:#EFF;">int from_pc='0';</li>
    <li style="background-color:#EEF;"></li>
    <li style="background-color:#EFF;">int speaker_pin = 12;</li>
    <li style="background-color:#EEF;"></li>
    <li style="background-color:#EFF;">const int vol_pin = 0;</li>
    <li style="background-color:#EEF;"></li>
    <li style="background-color:#EFF;">#include &lt;Adafruit_NeoPixel.h&gt;</li>
    <li style="background-color:#EEF;">#define PIN 13 // 信号用のピンを指定</li>
    <li style="background-color:#EFF;">#define NUMPIXELS 12 // LEDの数を指定</li>
    <li style="background-color:#EEF;">int brightness=20;//数値を変更して明るさ変更</li>
    <li style="background-color:#EFF;">Adafruit_NeoPixel pixels(NUMPIXELS, PIN, NEO_GRB + NEO_KHZ800);</li>
    <li style="background-color:#EEF;"></li>
    <li style="background-color:#EFF;">void setup() {</li>
    <li style="background-color:#EEF;">&nbsp;Serial.begin(9600);</li>
    <li style="background-color:#EFF;">&nbsp;pixels.begin(); // NeoPixel出力ピンの初期化</li>
    <li style="background-color:#EEF;">&nbsp;pixels.setBrightness(brightness);</li>
    <li style="background-color:#EFF;">}</li>
    <li style="background-color:#EEF;"></li>
    <li style="background-color:#EFF;">void loop() {</li>
    <li style="background-color:#EEF;">&nbsp;&nbsp;pixels.clear(); // すべてのLEDの色を0にセット</li>
    <li style="background-color:#EFF;"></li>
    <li style="background-color:#EEF;">&nbsp;&nbsp;int val=analogRead(vol_pin);</li>
    <li style="background-color:#EFF;">&nbsp;&nbsp;Serial.println(val);</li>
    <li style="background-color:#EEF;">&nbsp;&nbsp;delay(500);</li>
    <li style="background-color:#EFF;">&nbsp;&nbsp;</li>
    <li style="background-color:#EEF;">&nbsp;&nbsp;if(val&lt;1000){</li>
    <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;tone(12,val); </li>
    <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;}else{</li>
    <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;noTone(12);  </li>
    <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;}</li>
    <li style="background-color:#EFF;"></li>
    <li style="background-color:#EEF;">if(Serial.available() &gt; 0){</li>
    <li style="background-color:#EFF;">&nbsp;from_pc = Serial.read();</li>
    <li style="background-color:#EEF;">&nbsp;}</li>
    <li style="background-color:#EFF;"></li>
    <li style="background-color:#EEF;">&nbsp;&nbsp;if (from_pc=='1'){</li>
    <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(int i =0; i &lt; 12; i++){</li>
    <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pixels.setPixelColor(i, pixels.Color(0,255,255));}</li>
    <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pixels.show();  </li>
    <li style="background-color:#EEF;">&nbsp;&nbsp;}else if (from_pc=='2'){</li>
    <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(int i =0; i &lt; 12; i++){</li>
    <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pixels.setPixelColor(i, pixels.Color(127,255,212));}</li>
    <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pixels.show(); </li>
    <li style="background-color:#EEF;">&nbsp;&nbsp;}else if (from_pc=='3'){</li>
    <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(int i =0; i &lt; 12; i++){</li>
    <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pixels.setPixelColor(i, pixels.Color(0,255,127));}</li>
    <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pixels.show(); </li>
    <li style="background-color:#EEF;">&nbsp;&nbsp;}else if (from_pc=='4'){</li>
    <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(int i =0; i &lt; 12; i++){</li>
    <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pixels.setPixelColor(i, pixels.Color( 0,128,0));}</li>
    <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pixels.show(); </li>
    <li style="background-color:#EEF;">&nbsp;&nbsp;}else if (from_pc=='5'){</li>
    <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(int i =0; i &lt; 12; i++){</li>
    <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pixels.setPixelColor(i, pixels.Color(240,128,128));}</li>
    <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pixels.show(); </li>
    <li style="background-color:#EEF;">&nbsp;&nbsp;}else if (from_pc=='6'){</li>
    <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(int i =0; i &lt; 12; i++){</li>
    <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pixels.setPixelColor(i, pixels.Color(0,0,205));}</li>
    <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pixels.show(); </li>
    <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;}else {</li>
    <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;for(int i =0; i &lt; 12; i++){</li>
    <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pixels.setPixelColor(i, pixels.Color( 255,255,255));}</li>
    <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pixels.show(); </li>
    <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;</li>
    <li style="background-color:#EFF;">&nbsp;&nbsp;}</li>
    <li style="background-color:#EEF;">}</li>
    </ol></code>
  </div>
<h3 class="menu-contents">反省・感想</h3>
<div class="details">
今期、初めて電子工作・IoTに取り組んだが正直理想のクオリティまでは持っていけず悔しい。が、タイムラグはあれどサーバーを介して遠隔で機械を光らせることもできたし、音階も奏でることはできたので、少し自信になった。<br>
それから、今期は班リーダーになったものの、なかなかメンバーを作業しやすいように・スケジュール通りに作業を進められるように良い感じにフォローできず、グループメンバーには大変申し訳なかったと思う。<br>
それでも一緒に行動してくれた班のメンバーには感謝しかない。
</div>



<h3 class="menu-contents">参考リンク(外部サイト）</h3>
      <ul>
        <li><a href="https://deviceplus.jp/arduino/how-to-make-laser-strings-with-arduino-and-red-laser-01/" target="_blank">Arduinoと赤色レーザーで作るレーザーストリングス【前編】</li>
        <li><a href="https://sensorium.github.io/Mozzi/" target="_blank">Mozzi</li>
        <li><a href="https://omoroya.com/processing-lesson17/" target="_blank">Processing 入門 Lesson 17 【圧電スピーカーと電子ピアノ】</li>
        <li><a href="http://jkoba.net/prototyping/arduino/pressure_practice.html" target="_blank">圧力センサで遊ぼう</li>
        <li><a href="https://pixiedusttech.com/technologies/sound-hug/" target="_blank">SOUND HUG</li>
        <li><a href="https://fabble.cc/hironamekawa/pao" target="_blank">【製作日記】「Pao」～二人がグッと近づく楽器～</li>
        <li><a href="https://ai-inter1.com/python-while-true/" target="_blank">図解！Python while True 無限ループの抜け方と使い方を解説！(if, break, continue, inputとの組合せなど)</li>
        <li><a href="https://deviceplus.jp/arduino/entry043/" target="_blank">第43回 複数のセンサを組み合わせた照明デバイス制作に挑戦！ 〜Arduino＋センサの開発が劇的に楽になる！ローム・センサ評価キットを試してみた</li>
        <li><a href="http://www.musashinodenpa.com/arduino/ref/index.php?f=0&pos=3319" target="_blank">【Arduino 日本語リファレンス】</li>
      </ul>
   

</div>
<br>
<a class="backtotop"href="../de34/index.html">前のページに戻る</a>
</body>
</html>