<!DOCTYPE html>
<html lang="jp">
<head>
   
    <title>杉野　第7回</title>
   
    <link rel="stylesheet" href="css/style 3.css">
 
</head>
<body>

    <ul class="tab">
        <li class="tabItem noselected" contentId="content1"><a href="../index.html">HOME</a></li>
        <li class="tabItem noselected" contentId="content2"><a href="index.html">デザイン演習1・2</a></li>
        <li class="tabItem noselected" contentId="content3"><a href="../digi_fab/index.html">デジタルファブリケーション</a></li>
        <li class="tabItem noselected" contentId="content4"><a href="https://kuxbp.github.io/xbp/xbp2021/">XBP1期生（外部サイト）</a></li>
    </ul>

     
    <h1>デザイン演習　第7回</h1>
    <diV>
    
    <h2>課題</h2>
    まずデータの項目を見てから、合計時間と家賃に注目した。
    そこから移動時間が短く家賃もそこそこ安い、東急東横線沿いを調べることにした。
    一人暮らしを想定してワンルームを調べるが、条件は<ul>
    <li>移動時間は30分未満（合計時間の平均が約43分だったため、それよりも少し短くした）</li>
    <li>そのうち徒歩は15分未満</li>
    <li>家賃は5万円未満</li>
    </ul>   
    とした。<br>
    結果、反町〜妙蓮寺駅周辺の物件だと、移動時間も少なく、家賃も安いと考えた。
    <br><br>
    ＜路線ごとの合計時間のヒストグラム＞<br>
    <img src="images/datamining1.png" width="80%"><br>
    <img src="images/datamining2.png" width="80%"><br>
    <img src="images/datamining3.png" width="80%"><br>
    <img src="images/graph_line&commute.png" width="80%"><br>
    <img src="images/graph_station.png" width="80%"><br>
    <br>
    <h3>ソースコード</h3>
    <code>
        <ol style="list-style:decimal-leading-zero outside;in-left:0;padding-left:36px;margin:0;background-color:#EEF;color:#000;">
        <li style="background-color:#EFF;">import pandas as pd  # データ分析に用いるライブラリ</li>
        <li style="background-color:#EEF;">import matplotlib.pyplot as plt  # グラフ表示に用いるライブラリ</li>
        <li style="background-color:#EFF;">pd.set_option('display.unicode.east_asian_width', True)  # 表示のずれを少し緩和</li>
        <li style="background-color:#EEF;">plt.rcParams['font.family'] = 'IPAexGothic'  # グラフ表示におけるフォントの指定data_path = "./data/titanic.csv"</li>
        <li style="background-color:#EFF;"></li>
        <li style="background-color:#EEF;">data_path = "./data1.csv"  # データを読み込む</li>
        <li style="background-color:#EFF;">df_data = pd.read_csv(data_path, encoding="utf-8-sig")</li>
        <li style="background-color:#EEF;"></li>
        <li style="background-color:#EFF;">print(df_data.columns)  # 何の項目があるか確認</li>
        <li style="background-color:#EEF;">print(df_data["合計時間"].describe())  # 合計時間に関する詳細を見る</li>
        <li style="background-color:#EFF;">print(df_data["家賃"].describe())  # 家賃に関する詳細を見る</li>
        <li style="background-color:#EEF;">print(df_data.groupby("路線").mean())</li>
        <li style="background-color:#EFF;"></li>
        <li style="background-color:#EEF;">mask = (df_data["間取り"] == "ワンルーム")</li>
        <li style="background-color:#EFF;">df_room = df_data[mask]</li>
        <li style="background-color:#EEF;">df_room.loc[:, "合計時間"].hist(by=df_room.loc[:, "路線"], range=(0, 80), bins=30, figsize=(10, 9), sharex=True, sharey=True)# 合計時間の軸は最大80分</li>
        <li style="background-color:#EFF;">plt.xlabel("合計時間（分）")  # 横軸のラベル</li>
        <li style="background-color:#EEF;">plt.ylabel("件数")  # 縦軸のラベル</li>
        <li style="background-color:#EFF;">plt.title("合計時間のヒストグラム")  # グラフのタイトル</li>
        <li style="background-color:#EEF;">plt.subplots_adjust(top=0.92,  # グラフ位置の微調整</li>
        <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hspace=1)  # グラフ間の微調整</li>
        <li style="background-color:#EEF;">plt.show()</li>
        <li style="background-color:#EFF;"></li>
        <li style="background-color:#EEF;">mask = (df_data["路線"] == "東急東横線") &amp; (df_data["合計時間"] &lt; 30) &amp; (df_data["家賃"] &lt; 5) &amp; (df_data["徒歩"] &lt; 15) &amp; (df_data["間取り"] == "ワンルーム")</li>
        <li style="background-color:#EFF;">print(df_data[mask])</li>
        <li style="background-color:#EEF;"></li>
        <li style="background-color:#EFF;">axes = df_data[mask].loc[:, "家賃"].hist(by=df_data[mask].loc[:, "駅"],</li>
        <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;range=(0, 5), bins=10,# 家賃は最大5万円</li>
        <li style="background-color:#EFF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;figsize=(10, 8),</li>
        <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sharex=True, sharey=True)</li>
        <li style="background-color:#EFF;"></li>
        <li style="background-color:#EEF;">plt.suptitle("駅別家賃のヒストグラム") # グラフ全体のタイトル</li>
        <li style="background-color:#EFF;">plt.subplots_adjust(top=0.92, # グラフ位置の微調整</li>
        <li style="background-color:#EEF;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hspace=1) # グラフ間の微調整</li>
        <li style="background-color:#EFF;">plt.show()</li>
        <li style="background-color:#EEF;"></li>
        <li style="background-color:#EFF;"></li>
        <li style="background-color:#EEF;"></li>
        <li style="background-color:#EFF;"></li>
        </ol></code>
    
   
    <a href="index.html">前の画面に戻る</a>
    </diV>  

</body>
</html>